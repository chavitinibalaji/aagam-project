<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>AAGAM ‚Äì Profile</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
  <style>
    * {
      box-sizing: border-box;
      font-family: Inter, Arial, sans-serif;
    }
    body {
      margin: 0;
      background: #f5f5f5;
    }

    /* HEADER with Logo & Back Button */
    .header {
      background: #fff;
      padding: 12px 16px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .back-btn {
      font-size: 22px;
      cursor: pointer;
      color: #333;
    }
    .header-logo {
      height: 38px;
      width: auto;
    }

    /* PROFILE CARD */
    .profile-card {
      background: #fff;
      margin: 12px;
      border-radius: 14px;
      padding: 20px;
      text-align: center;
    }
    .avatar-container {
      position: relative;
      width: 90px;
      height: 90px;
      margin: 0 auto 16px;
    }
    .avatar-img {
      width: 100%;
      height: 100%;
      border-radius: 50%;
      object-fit: cover;
      border: 3px solid #ff3269;
    }
    .avatar-upload-btn {
      position: absolute;
      bottom: 0;
      right: 0;
      background: #ff3269;
      color: white;
      width: 32px;
      height: 32px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      border: 2px solid white;
      font-size: 14px;
    }
    .avatar-upload {
      display: none;
    }
    .profile-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
    }
    .profile-name, .profile-phone {
      font-size: 18px;
      font-weight: 600;
      flex: 1;
    }
    .profile-phone {
      color: #666;
      font-weight: 400;
    }
    .edit-icon {
      cursor: pointer;
      color: #ff3269;
      font-size: 1.1rem;
      padding: 6px;
    }
    .edit-input {
      font-size: 18px;
      padding: 6px 10px;
      border: 1px solid #ff3269;
      border-radius: 8px;
      width: 70%;
      outline: none;
    }
    .hidden {
      display: none;
    }

    /* LOCATION BOX */
    .location-box {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 14px;
      padding: 12px;
      background: #f7f7f7;
      border-radius: 10px;
      font-size: 14px;
    }

    /* MENU */
    .menu {
      background: #fff;
      margin: 12px;
      border-radius: 14px;
      overflow: hidden;
    }
    .menu-item {
      padding: 14px 16px;
      border-bottom: 1px solid #eee;
      display: flex;
      justify-content: space-between;
      align-items: center;
      cursor: pointer;
    }
    .menu-item:last-child {
      border-bottom: none;
    }
    .menu-item:hover {
      background: #fafafa;
    }

    /* LOGOUT */
    .logout-btn {
      margin: 20px 12px;
      width: calc(100% - 24px);
      padding: 14px;
      background: #ff3269;
      color: #fff;
      border: none;
      border-radius: 10px;
      font-size: 16px;
      cursor: pointer;
    }
  </style>
</head>
<body>

<!-- HEADER with Logo & Back Button -->
<div class="header">
  <i class="fas fa-arrow-left back-btn" onclick="history.back()"></i>
  <img src="https://raw.githubusercontent.com/chavitinibalaji/aagam-assets/main/IMG_AAGAM.png" alt="AAGAM" class="header-logo">
</div>

<!-- PROFILE INFO -->
<div class="profile-card">
  <div class="avatar-container">
    <img id="avatarImg" src="https://via.placeholder.com/90?text=User" alt="Profile Photo" class="avatar-img">
    <label for="avatarUpload" class="avatar-upload-btn">
      <i class="fas fa-camera"></i>
    </label>
    <input type="file" id="avatarUpload" class="avatar-upload" accept="image/*">
  </div>

  <!-- Editable Name -->
  <div class="profile-row">
    <div style="flex: 1;">
      <div class="profile-name" id="userNameDisplay">AAGAM</div>
      <input type="text" id="userNameInput" class="edit-input hidden" value="balu" 
             onblur="saveName()" onkeypress="if(event.key === 'Enter') saveName()">
    </div>
    <i class="fas fa-pencil-alt edit-icon" onclick="editName()"></i>
  </div>

  <!-- Editable Phone -->
  <div class="profile-row">
    <div style="flex: 1;">
      <div class="profile-phone" id="userPhoneDisplay">xxxxxxxxxx</div>
      <input type="tel" id="userPhoneInput" class="edit-input hidden" value="xxxxxxxxxx" 
             onblur="savePhone()" onkeypress="if(event.key === 'Enter') savePhone()">
    </div>
    <i class="fas fa-pencil-alt edit-icon" onclick="editPhone()"></i>
  </div>

  <div class="location-box">
    <span>üìç <span id="userLocation">Select location</span></span>
    <span onclick="goToLocation()" style="color:#ff3269;cursor:pointer;">Change</span>
  </div>
</div>

<!-- MENU -->
<div class="menu">
  <div class="menu-item" onclick="goToOrders()">üõí My Orders <span>‚Ä∫</span></div>
  <div class="menu-item" onclick="goToAddresses()">üè† Saved Addresses <span>‚Ä∫</span></div>
  <div class="menu-item" onclick="goToEditProfile()">‚úèÔ∏è Edit Profile <span>‚Ä∫</span></div>
  <div class="menu-item" onclick="window.location.href='help.html'">
    ‚ùì Help & Support <span>‚Ä∫</span>
  </div>
</div>

<!-- LOGOUT -->
<button class="logout-btn" onclick="logout()">Logout</button>

<script>
/* LOAD USER DATA (REAL TIME) */
window.onload = () => {
  const name = localStorage.getItem("userName") || "AAGAM";
  const phone = localStorage.getItem("userPhone") || "xxxxxxxxxx";
  const location = localStorage.getItem("location") || "Select location";

  document.getElementById("userNameDisplay").innerText = name;
  document.getElementById("userNameInput").value = name;
  document.getElementById("userPhoneDisplay").innerText = phone;
  document.getElementById("userPhoneInput").value = phone;
  document.getElementById("userLocation").innerText = location;

  // Load saved avatar
  const savedAvatar = localStorage.getItem("userAvatar");
  if (savedAvatar) {
    document.getElementById("avatarImg").src = savedAvatar;
  }
};

/* Avatar Upload & Save */
document.getElementById("avatarUpload").addEventListener("change", function(e) {
  const file = e.target.files[0];
  if (file) {
    const reader = new FileReader();
    reader.onload = function(e) {
      const img = document.getElementById("avatarImg");
      img.src = e.target.result;
      localStorage.setItem("userAvatar", e.target.result);
    };
    reader.readAsDataURL(file);
  }
});

/* Edit Name */
function editName() {
  document.getElementById("userNameDisplay").classList.add("hidden");
  document.getElementById("userNameInput").classList.remove("hidden");
  document.getElementById("userNameInput").focus();
}
function saveName() {
  const newName = document.getElementById("userNameInput").value.trim() || "AAGAM";
  localStorage.setItem("userName", newName);
  document.getElementById("userNameDisplay").innerText = newName;
  document.getElementById("userNameDisplay").classList.remove("hidden");
  document.getElementById("userNameInput").classList.add("hidden");
}

/* Edit Phone */
function editPhone() {
  document.getElementById("userPhoneDisplay").classList.add("hidden");
  document.getElementById("userPhoneInput").classList.remove("hidden");
  document.getElementById("userPhoneInput").focus();
}
function savePhone() {
  let newPhone = document.getElementById("userPhoneInput").value.trim();
  if (!newPhone) newPhone = "XXXXXXXXXX";
  localStorage.setItem("userPhone", newPhone);
  document.getElementById("userPhoneDisplay").innerText = newPhone;
  document.getElementById("userPhoneDisplay").classList.remove("hidden");
  document.getElementById("userPhoneInput").classList.add("hidden");
}

/* NAVIGATION FUNCTIONS */
function goToEditProfile(){
  window.location.href = "edit-profile.html";
}
function goToAddresses(){
  window.location.href = "addresse.html";
}
function goToOrders(){
  window.location.href = "orders.html";
}
function goToLocation(){
  window.location.href = "location.html";
}

/* LOGOUT ‚Äì redirects to login */
function logout(){
  if (confirm("Are you sure you want to logout?")) {
    localStorage.clear();
    alert("Logged out successfully");
    window.location.href = "login.html";
  }
}
</script>
</body>
</html>
