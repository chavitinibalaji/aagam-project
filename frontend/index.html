<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>AAGAM â€“ Groceries in Minutes</title>
<script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&libraries=places"></script>

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Inter,Arial,sans-serif}
body{background:#f6f7fb;color:#111}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   Responsive Header
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.header {
  background: #ffffff;
  padding: 10px 14px;
  display: flex;
  align-items: center;
  gap: 10px;
  border-bottom: 1px solid #e5e7eb;
  position: sticky;
  top: 0;
  z-index: 100;
  flex-wrap: nowrap;
  min-height: 56px;
}

.logo {
  font-size: 20px;
  font-weight: 800;
  color: #00b761;
  white-space: nowrap;
  flex-shrink: 0;
}

.location-bar {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 6px 10px;
  background: #f8fafc;
  border-radius: 10px;
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  color: #1f2937;
  white-space: nowrap;
  flex-shrink: 0;
  max-width: 160px;
  overflow: hidden;
  text-overflow: ellipsis;
}

.location-bar:hover,
.location-bar:active {
  background: #e5e7eb;
}

.search-container {
  flex: 1 1 auto;
  min-width: 120px;
  max-width: 500px;
  margin: 0 4px;
}

.search {
  display: flex;
  align-items: center;
  background: #f1f5f9;
  border-radius: 12px;
  padding: 8px 12px;
  width: 100%;
  transition: all 0.2s ease;
}

.search-icon {
  font-size: 18px;
  color: #6b7280;
  margin-right: 8px;
  flex-shrink: 0;
}

.search input {
  flex: 1;
  min-width: 0;
  border: none;
  background: transparent;
  outline: none;
  font-size: 15px;
  color: #111827;
  padding: 0;
}

.search input::placeholder {
  color: #9ca3af;
}

.header-icons {
  display: flex;
  align-items: center;
  gap: 12px;
  flex-shrink: 0;
}

.icon-btn {
  position: relative;
  font-size: 24px;
  color: #374151;
  background: none;
  border: none;
  padding: 8px;
  cursor: pointer;
  border-radius: 50%;
  transition: background 0.2s;
  touch-action: manipulation;
}

.icon-btn:hover,
.icon-btn:active {
  background: #f3f4f6;
}

.cart-badge {
  position: absolute;
  top: 4px;
  right: 4px;
  background: #ff3366;
  color: white;
  font-size: 10px;
  font-weight: bold;
  min-width: 16px;
  height: 16px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0 4px;
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   Media Queries for better mobile experience
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
@media (max-width: 640px) {
  .header {
    padding: 8px 12px;
    gap: 8px;
  }
  .logo { font-size: 18px; }
  .location-bar { font-size: 12px; padding: 5px 8px; max-width: 120px; }
  .search input { font-size: 14px; }
  .icon-btn { font-size: 22px; padding: 6px; }
}

@media (max-width: 480px) {
  .location-bar { display: none; } /* optional â€“ hides location on tiny screens */
  .search-container { min-width: 100px; }
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   Rest of your original styles (banner, products, cart, modal, footer...)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.banner-section{position:relative;padding:12px 12px 24px;background:#fff;overflow:hidden;display:none}
.banner-section.visible{display:block}
.banner-carousel{position:relative;width:100%;height:220px;border-radius:18px;overflow:hidden;box-shadow:0 4px 12px rgba(0,0,0,.1)}
.banner-slide{position:absolute;top:0;left:0;width:100%;height:100%;opacity:0;transition:opacity 0.8s ease}
.banner-slide.active{opacity:1}
.banner-slide img{width:100%;height:100%;object-fit:cover}
.banner-prev,.banner-next{position:absolute;top:50%;transform:translateY(-50%);background:rgba(255,255,255,.7);width:36px;height:36px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:22px;color:#333;cursor:pointer;z-index:10}
.banner-prev{left:12px}
.banner-next{right:12px}
.banner-dots{position:absolute;bottom:12px;left:50%;transform:translateX(-50%);display:flex;gap:8px;z-index:10}
.banner-dots span{width:8px;height:8px;background:#fff;opacity:0.6;border-radius:50%;transition:0.3s}
.banner-dots span.active{opacity:1;width:20px;border-radius:10px;}
.cat-nav{display:flex;gap:18px;padding:12px;background:#fff;overflow-x:auto;border-bottom:1px solid #eee}
.cat-nav span{font-weight:600;cursor:pointer;white-space:nowrap;color:#666}
.cat-nav .active{color:#00b761;border-bottom:3px solid #00b761;padding-bottom:8px}
.cat-section{padding:16px 12px 8px;background:#fff}
.cat-title{font-size:22px;font-weight:800;margin-bottom:8px}
.products {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 12px;
  padding: 0 10px 20px;
  background: #ffffff;
}

.cat-nav span[data-cat="all"].active ~ #sectionsContainer .products {
  display: flex;
  flex-wrap: nowrap;
  overflow-x: auto;
  gap: 12px;
  padding: 0 12px 20px;
  scroll-behavior: smooth;
  -webkit-overflow-scrolling: touch;
  scrollbar-width: thin;
  scrollbar-color: #ff3366 #f5f5f5;
}

.products::-webkit-scrollbar {
  height: 8px;
}
.products::-webkit-scrollbar-track {
  background: #f5f5f5;
  border-radius: 4px;
}
.products::-webkit-scrollbar-thumb {
  background: #ff3366;
  border-radius: 4px;
}
.products::-webkit-scrollbar-thumb:hover {
  background: #e62950;
}

.product {
  position: relative;
  background: #ffffff;
  border-radius: 12px;
  overflow: hidden;
  width: 100%;
  min-width: 0;
  box-shadow: 0 2px 8px rgba(0,0,0,0.06);
  display: flex;
  flex-direction: column;
  transition: all 0.28s ease;
}

.product:hover {
  transform: translateY(-5px);
  box-shadow: 0 10px 24px rgba(0,0,0,0.14);
}

.product-img-container {
  position: relative;
  overflow: hidden;
  height: 130px;
  background: #f9f9f9;
}

.product img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform 0.4s ease;
}

.product:hover img {
  transform: scale(1.08);
}

.product-info {
  padding: 10px 12px;
  flex: 1;
  display: flex;
  flex-direction: column;
}

.product-name {
  font-size: 13px;
  font-weight: 600;
  line-height: 1.25;
  margin-bottom: 4px;
  color: #222;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.product-weight {
  font-size: 11px;
  color: #666;
  margin-bottom: 5px;
}

.product-price {
  display: flex;
  align-items: center;
  flex-wrap: wrap;
  gap: 6px;
  margin-bottom: 8px;
}

.product-price .selling {
  font-size: 15px;
  font-weight: 800;
  color: #ff3366;
}

.product-price .mrp {
  font-size: 12px;
  color: #888;
  text-decoration: line-through;
}

.product-price .off {
  color: #d32f2f;
  font-size: 11px;
  font-weight: 700;
  background: #ffebee;
  padding: 2px 5px;
  border-radius: 4px;
}

.add-btn,
.qty-btn {
  width: 100%;
  padding: 8px;
  background: #ff3366;
  color: white;
  border: none;
  border-radius: 50px;
  font-weight: 700;
  font-size: 13px;
  cursor: pointer;
  transition: all 0.2s ease;
  margin-top: auto;
}

.add-btn:hover,
.qty-btn:hover {
  background: #e62950;
  transform: translateY(-1px);
}

.qty-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  padding: 8px 10px;
}

.qty-btn button {
  width: 28px;
  height: 28px;
  border-radius: 50%;
  background: white;
  color: #ff3366;
  font-size: 18px;
  font-weight: bold;
  border: none;
  cursor: pointer;
}

.qty-btn button:hover {
  background: #ffebee;
}

.no-results {
  padding: 60px 20px;
  text-align: center;
  color: #777;
  font-size: 16px;
  grid-column: 1 / -1;
}


/* Detail Modal */
  .details-overlay {
    position:fixed; inset:0; background:rgba(0,0,0,.55); display:none;
    align-items:flex-start; justify-content:center; z-index:400; overflow-y:auto;
  }
  .details-modal {
    background:#fff; width:100%; max-width:900px; border-radius:16px 16px 0 0;
    margin-top:60px; max-height:90vh; display:flex; flex-direction:column;
  }
  .modal-header {
    padding:16px; display:flex; align-items:center; border-bottom:1px solid #eee;
    position:relative;
  }
  .back-btn {
    font-size:24px; background:none; border:none; cursor:pointer; color:#333;
    padding:8px; border-radius:50%; margin-right:16px;
  }
  .back-btn:hover { background:#f5f5f5; }
  .details-gallery { flex:1; overflow-y:auto; background:#f9f9f9; }
  .details-main-img { width:100%; height:400px; object-fit:contain; }
  .details-info { padding:20px; background:#fff; }
  .details-name { font-size:24px; font-weight:700; margin-bottom:8px; }
  .details-weight { font-size:14px; color:#555; margin-bottom:12px; }
  .details-price-big { font-size:32px; font-weight:800; color:#ff3366; margin-bottom:12px; }
  .details-price-big .mrp { font-size:16px; color:#888; text-decoration:line-through; margin-right:8px; }
  .details-delivery { font-size:14px; color:green; margin:12px 0; }
  .details-coupon {
    font-size:14px; color:#ff3366; padding:6px 12px; background:#fff0f5;
    border-radius:6px; display:inline-block; margin:12px 0;
  }
  .add-section {
    display:flex; flex-direction:column; gap:12px; margin:16px 0;
  }
  .qty-controls-detail {
    display:flex; align-items:center; justify-content:center; gap:24px;
    font-size:18px; font-weight:700;
  }
  .qty-controls-detail button {
    width:48px; height:48px; border-radius:50%; background:#ffebee;
    color:#ff3366; border:none; font-size:24px; cursor:pointer;
  }
  .qty-controls-detail span {
    min-width:40px; text-align:center; font-size:20px;
  }
  .add-to-cart-big {
    width:100%; padding:16px; background:#ff3366; color:white; border:none;
    border-radius:50px; font-weight:700; font-size:18px; cursor:pointer;
    transition:all .25s ease;
  }
  .add-to-cart-big:disabled { opacity:.7; cursor:not-allowed; }
  .add-to-cart-big[data-state="loading"] { background:#e62950; }
  .add-to-cart-big[data-state="success"] { background:#00b761; }
  .info-section { margin:20px 0; }
  .info-section h3 { font-size:16px; font-weight:600; margin-bottom:8px; color:#333; }
  .info-section ul { list-style:none; padding:0; }
  .info-section li { margin-bottom:8px; }
  /* Similar Products */
  .similar-section { margin-top:20px; padding-top:20px; border-top:1px solid #eee; background:#f0f0f0; }
  .similar-header {
    display:flex; justify-content:space-between; align-items:center;
    padding:0 16px; margin-bottom:12px;
  }
  .similar-header button {
    border:none; background:#ddd; border-radius:50%; font-size:18px;
    padding:4px 10px; cursor:pointer;
  }
  .similar-products { display:flex; gap:12px; overflow-x:auto; padding:0 16px 16px; }
  .similar-product {
    min-width:140px; background:#fff; border-radius:12px; padding:10px;
    box-shadow:0 2px 8px rgba(0,0,0,.06); cursor:pointer; transition:transform .2s;
  }
  .similar-product:hover { transform:translateY(-3px); }
  .similar-product img { height:100px; width:100%; object-fit:contain; background:#f9f9f9; }
.cart-overlay{position:fixed;inset:0;background:rgba(0,0,0,.45);display:none;z-index:300}
.cart-popup{position:fixed;bottom:-100%;left:0;width:100%;max-height:90%;background:#fff;border-radius:18px 18px 0 0;transition:.35s;z-index:301;overflow:hidden;display:flex;flex-direction:column}
.cart-popup.active{bottom:0}
.cart-header{padding:16px;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #eee}
.cart-header h3{font-size:20px;font-weight:700}
.cart-content{flex:1;overflow-y:auto;padding:16px}
#cartItems .cart-item{display:flex;align-items:center;gap:16px;margin-bottom:20px;padding-bottom:20px;border-bottom:1px solid #eee}
.cart-item-img{width:80px;height:80px;border-radius:12px;overflow:hidden;background:#f9f9f9}
.cart-item-img img{width:100%;height:100%;object-fit:contain}
.cart-item-details{flex:1}
.cart-item-details h4{font-size:16px}
.cart-item-details p{font-size:14px;color:#555}
.quantity-controls{display:flex;align-items:center;gap:12px;margin-top:8px}
.quantity-controls button{width:32px;height:32px;border:1px solid #ddd;border-radius:8px;background:#fff;font-size:20px;display:flex;align-items:center;justify-content:center}
.quantity-controls span{font-size:16px;font-weight:600;width:40px;text-align:center}
.cart-item-price{font-size:18px;font-weight:700;color:#ff3366}
.cart-footer{background:#fff;padding:16px;border-top:1px solid #eee}
.cart-total{display:flex;justify-content:space-between;margin-bottom:16px}
.cart-total span{font-size:16px}
.cart-total strong{font-size:20px;font-weight:800;color:#ff3366}
.cart-proceed-btn{width:100%;padding:16px;background:#ff3366;color:#fff;border:none;border-radius:12px;font-size:18px;font-weight:700}
.footer{background:#111;color:#fff;padding:40px 20px;text-align:center;margin-top:60px;}
.footer h3{font-size:22px;margin-bottom:16px;color:#00b761}
.footer p{font-size:14px;margin:8px 0;color:#ccc}
.footer .contact-info{margin:20px 0;}
.footer .social{margin-top:20px;}
.footer .social a{margin:0 12px;}
.footer .social img{width:48px;height:48px;border-radius:50%;transition:transform 0.3s;}
.footer .social img:hover{transform:scale(1.1);}
.footer .copyright{margin-top:30px;font-size:12px;color:#888;}
</style>
</head>
<body>

<div class="header">
  <div class="logo">AAGAM</div>

  <div class="location-bar" onclick="window.location.href='location.html'">
    ğŸ“ <span id="locationText">Select Location</span>
  </div>

  <div class="search-container">
    <div class="search">
      <span class="search-icon">ğŸ”</span>
      <input 
        id="searchInput" 
        onkeyup="handleSearch()" 
        placeholder="Search groceries, fruits..." 
        autocomplete="off"
      />
    </div>
  </div>

  <div class="header-icons">
    <button class="icon-btn" aria-label="Profile" onclick="openProfile()">ğŸ‘¤</button>
    <button class="icon-btn" aria-label="Cart" onclick="openCart()">
      ğŸ›’
      <span id="cartCount" class="cart-badge" style="display:none;">0</span>
    </button>
  </div>
</div>

<div class="cat-nav">
  <span class="active" data-cat="all">All</span>
  <span data-cat="grocery">Grocery</span>
  <span data-cat="fruit">Fruits</span>
  <span data-cat="veg">Vegetables</span>
  <span data-cat="dairy">Dairy</span>
  <span data-cat="snack">Snacks</span>
  <span data-cat="beauty">Beauty</span>
  <span data-cat="toys">Toys</span>
  <span data-cat="student">Student needs</span>
</div>

<div class="banner-section visible" id="bannerSection">
  <div class="banner-carousel" id="bannerCarousel">
    <div class="banner-slide active"><img src="https://img.freepik.com/free-vector/flat-design-grocery-store-sale-banner_23-2151074240.jpg" alt="Grocery Sale"></div>
    <div class="banner-slide"><img src="https://img.freepik.com/free-vector/flat-design-grocery-store-sale-banner_23-2151069702.jpg" alt="Big Sale"></div>
    <div class="banner-slide"><img src="https://cdn.create.vista.com/downloads/3f85af1e-e7b7-410d-9725-329a269653f5_1024.jpeg" alt="Fresh Veggies"></div>
  </div>
  <div class="banner-prev" onclick="prevSlide()">â®</div>
  <div class="banner-next" onclick="nextSlide()">â¯</div>
  <div class="banner-dots" id="bannerDots"></div>
</div>

<div id="sectionsContainer"></div>

<div id="noResults" class="no-results" style="display:none;">
  No products found matching "<strong id="searchTerm"></strong>"
</div>

<!-- Details Modal -->
<div class="details-overlay" id="detailsOverlay" onclick="closeDetails()">
  <div class="details-modal" onclick="event.stopPropagation()">
    <div class="modal-header">
      <button class="back-btn" onclick="closeDetails()">â†</button>
      <h2>Product Details</h2>
    </div>
    <div class="details-gallery">
      <!-- NO PRODUCT IMAGE ADDED HERE - as per your request -->
      <div class="details-thumbs" id="detailsThumbs"></div>
    </div>
    <div class="details-info">
      <div class="details-name" id="detailsName"></div>
      <div class="details-weight" id="detailsWeight"></div>
      <div class="details-price-big" id="detailsPrice"></div>
      <div>
        <span id="detailsMrp"></span>
        <span id="detailsDiscount"></span>
      </div>
      <div class="details-delivery" id="detailsDelivery"></div>
      <div class="details-coupon">Get at â‚¹101 with coupon offers</div>
      <!-- Quantity Selector + Add Button -->
      <div class="add-section">
        <div id="qtyControlsDetail" class="qty-controls-detail" style="display:none;">
          <button onclick="updateDetailQty(-1)">â€“</button>
          <span id="detailQty">1</span>
          <button onclick="updateDetailQty(1)">+</button>
        </div>
        <button
          class="add-to-cart-big"
          id="addToCartBtn"
          onclick="handleAddToCartFromDetails()"
          data-state="idle"
        >
          Add To Cart
        </button>
      </div>
      <div class="info-section">
        <h3>Highlights</h3>
        <ul id="highlightsList"></ul>
      </div>
      <div class="similar-section">
        <div class="similar-header">
          <h3>You may also like</h3>
          <div>
            <button onclick="scrollSimilar(-1)">â€¹</button>
            <button onclick="scrollSimilar(1)">â€º</button>
          </div>
        </div>
        <div class="similar-products" id="similarProducts"></div>
      </div>
    </div>
  </div>
</div>

<!-- Cart Popup (your exact code + navigation added to button) -->
<div class="cart-overlay" id="cartOverlay" onclick="closeCart()"></div>
<div class="cart-popup" id="cartPopup">
  <div class="cart-header">
    <h3>Your Cart</h3>
    <div onclick="closeCart()" style="font-size:24px;cursor:pointer">Ã—</div>
  </div>
  <div class="cart-content" id="cartItems"></div>
  <div class="cart-footer">
    <div class="cart-total">
      <span>Total</span>
      <strong id="cartTotal">â‚¹0</strong>
    </div>
 <button class="cart-proceed-btn" onclick="window.location.href = 'checkout.html'">
      Proceed to Checkout
    </button>
  </div>
</div>

<!-- Footer with Contact Info -->
<footer class="footer">
  <div class="footer-content">
    <h3>Contact Us</h3>
    <p class="contact-info">
      Email: support@aagam.com<br>
      Phone: +91 xxxxx xxxxx<br>
      WhatsApp: <a href="https://wa.me/918179315170" target="_blank" style="color:#00b761;text-decoration:none;">+91 xxxxx xxxxx</a><br>
      Address: AAGAM Groceries, Visakhapatnam, Andhra Pradesh, India
    </p>
   
    <div class="social">
      <a href="https://www.facebook.com/share/1Cuq8v8JAL/?mibextid=wwXIfr" target="_blank">
        <img src="https://upload.wikimedia.org/wikipedia/commons/5/51/Facebook_f_logo_%282019%29.svg" alt="Facebook">
      </a>
      <a href="https://x.com/aagam_business?s=11" target="_blank">
        <img src="https://img.freepik.com/premium-vector/twitter-vector-logo-logotype-vector-social-media_901408-401.jpg?semt=ais_hybrid&w=740&q=80" alt="X (Twitter)">
      </a>
      <a href="https://www.instagram.com/aagam_business?igsh=MXJnam1kNjRxYzF2bg%3D%3D&utm_source=qr" target="_blank">
        <img src="https://upload.wikimedia.org/wikipedia/commons/a/a5/Instagram_icon.png" alt="Instagram">
      </a>
    </div>
   
    <p class="copyright">
      Â© 2026 AAGAM â€“ Groceries in Minutes. All rights reserved.
    </p>
  </div>
</footer>


<script>
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// JavaScript (with cart badge update added)
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let cart = [], activeCategory = "all";
let currentProduct = {};
let searchQuery = "";

const savedLocation = localStorage.getItem("deliveryLocation");
if (savedLocation) {
  document.getElementById("locationText").innerText = savedLocation;
}

// New unlimited products (copy-paste more of these)
let categorySections = [
  {
    title: "Grocery",
    products: [
      {name:"Aashirvaad Atta", price:"â‚¹185", mrp:"â‚¹220", off:"â‚¹35 OFF", weight:"5 kg", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/download.jpg", cat:"grocery"},
      {name:"Rice basmati", price:"â‚¹165", mrp:"â‚¹180", off:"â‚¹15 OFF", weight:"5 kg", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/download%20(1).jpg", cat:"grocery"},
      {name:"Toor dal", price:"â‚¹265", mrp:"â‚¹280", off:"â‚¹15 OFF", weight:"1 kg", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/images.jpg", cat:"grocery"},
      {name:"Moong dal", price:"â‚¹135", mrp:"â‚¹150", off:"â‚¹15 OFF", weight:"5 kg", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/images%20(1).jpg", cat:"grocery"},
      {name:"Fortune Sunflower Oil", price:"â‚¹120", mrp:"â‚¹150", off:"â‚¹30 OFF", weight:"1 L", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/download%20(2).jpg", cat:"grocery"},
      {name:"Tata Salt", price:"â‚¹22", weight:"1 kg", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/download%20(3).jpg", cat:"grocery"},
      {name:"Maggi 2-Min Noodles", price:"â‚¹38", mrp:"â‚¹44", off:"â‚¹6 OFF", weight:"280 g", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/download%20(4).jpg", cat:"grocery"},
      {name:"India Gate Basmati Rice", price:"â‚¹98", weight:"1 kg", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/images%20(2).jpg", cat:"grocery"},
      {name:"Refined Sugar", price:"â‚¹45", weight:"1 kg", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/images%20(3).jpg", cat:"grocery"},
      {name:"Wheat Flour Chakki Fresh", price:"â‚¹65", weight:"5 kg", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/download%20(5).jpg", cat:"grocery"},
      {name:"Patanjali Ghee", price:"â‚¹520", weight:"1 L", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/download%20(6).jpg", cat:"grocery"},
      {name:"Everest Chilli Powder", price:"â‚¹85", weight:"100 g", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/download%20(7).jpg", cat:"grocery"},
      {name:"MDH Garam Masala", price:"â‚¹75", weight:"100 g", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/download%20(8).jpg", cat:"grocery"}
    ]
  },
  {
    title: "Fruits",
    products: [
      {name:"Apple Shimla", price:"â‚¹126", mrp:"â‚¹221", off:"â‚¹95 OFF", weight:"4 pcs", img:"https://images.unsplash.com/photo-1560806887-1e4cd0b6cbd6?w=800", cat:"fruit"},
      {name:"Banana Robusta", price:"â‚¹28", mrp:"â‚¹41", off:"â‚¹13 OFF", weight:"6-7 pcs", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/bananas.jpg", cat:"fruit"},
      {name:"Mango Alphonso", price:"â‚¹180", weight:"1 kg", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/mango.jpg", cat:"fruit"},
      {name:"Green Grapes", price:"â‚¹90", weight:"500 g", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/grapes.jpg", cat:"fruit"},
      {name:"Orange Nagpur", price:"â‚¹65", weight:"1 kg", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/Orange.jpg", cat:"fruit"},
      {name:"Pomegranate", price:"â‚¹120", weight:"500 g", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/Pomegranate.jpg", cat:"fruit"},
      {name:"Papaya", price:"â‚¹55", weight:"1 kg", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/Papaya.jpg", cat:"fruit"},
      {name:"Guava", price:"â‚¹40", weight:"1 kg", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/Guava.jpg", cat:"fruit"},
      {name:"Pineapple", price:"â‚¹75", weight:"1 piece", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/Pineapple.jpg", cat:"fruit"},
      {name:"Watermelon", price:"â‚¹60", weight:"2-3 kg", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/Watermelon.jpg", cat:"fruit"}
    ]
  },
  {
    title: "Vegetables",
    products: [
      {name:"Tomato Local", price:"â‚¹25", mrp:"â‚¹48", off:"â‚¹23 OFF", weight:"500 g", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/Tomatos.jpg", cat:"veg"},
      {name:"Onion", price:"â‚¹32", weight:"1 kg", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/onions.jpeg", cat:"veg"},
      {name:"Potato", price:"â‚¹32", weight:"1 kg", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/potatos.jpeg", cat:"veg"},
      {name:"Cucumber", price:"â‚¹18", weight:"500 g", img:"https://images.unsplash.com/photo-1604977042946-1eecc30f269e?w=800", cat:"veg"},
      {name:"Carrot", price:"â‚¹35", weight:"500 g", img:"https://images.unsplash.com/photo-1598170845058-32b9d6a5da37?w=800", cat:"veg"},
      {name:"Cauliflower", price:"â‚¹45", weight:"1 pc", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/cauliflower.jpeg", cat:"veg"},
      {name:"Cabbage", price:"â‚¹23", weight:"1 pc", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/cabbage.jpeg", cat:"veg"},
      {name:"Capsicum", price:"â‚¹50", weight:"250 g", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/Capsicum.jpg", cat:"veg"},
      {name:"Brinjal", price:"â‚¹30", weight:"500 g", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/brinjal.jpeg", cat:"veg"},
      {name:"Lady Finger", price:"â‚¹40", weight:"250 g", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/lady%20finger.jpeg", cat:"veg"}
    ]
  },
  {
    title: "Dairy",
    products: [
      {name:"Aagam Fresh Milk", price:"â‚¹40", weight:"500 ml", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/ChatGPT%20Image%20Jan%2029%2C%202026%2C%2005_11_11%20PM.png", cat:"dairy"},
      {name:"Amul Butter", price:"â‚¹48", mrp:"â‚¹52", off:"â‚¹4 OFF", weight:"100 g", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/Amul%20Butter.jpg", cat:"dairy"},
      {name:"Milky Mist Paneer", price:"â‚¹91", mrp:"â‚¹130", off:"â‚¹39 OFF", weight:"200 g", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/Milky%20Mist%20Paneer.jpg", cat:"dairy"},
      {name:"Amul Cheese Slices", price:"â‚¹120", weight:"200 g", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/Amul%20Cheese%20Slices.jpg", cat:"dairy"},
      {name:"Heritage Dairy Curd", price:"â‚¹35", weight:"400 g", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/heritage%20Dairy%20Curd.jpg", cat:"dairy"},
      {name:"Amul Lassi", price:"â‚¹25", weight:"200 ml", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/Amul%20Lassi.jpg", cat:"dairy"},
      {name:"Britannia Cheese Block", price:"â‚¹199", weight:"200 g", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/Britannia%20Cheese%20Block.jpg", cat:"dairy"},
      {name:"Amul Fresh Cream", price:"â‚¹60", weight:"200 ml", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/Amul%20Fresh%20Cream.jpg", cat:"dairy"},
      {name:"Nandini Ghee", price:"â‚¹520", weight:"1 L", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/Nandini%20Ghee.jpg", cat:"dairy"},
      {name:"Amul Masti Buttermilk", price:"â‚¹20", weight:"200 ml", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/Amul%20Masti%20Buttermilk.jpg", cat:"dairy"}
    ]
  },
  {
    title: "Snacks",
    products: [
      {name:"Lays Classic Salted", price:"â‚¹20", weight:"52 g", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/Lays%20Classic%20Salted.jpeg", cat:"snack"},
      {name:"Bingo Mad Angles", price:"â‚¹10", weight:"60 g", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/Bingo%20Mad%20Angles.jpeg", cat:"snack"},
      {name:"Parle-G Biscuits", price:"â‚¹5", weight:"100 g", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/Parle-G%20Biscuits.jpeg", cat:"snack"},
      {name:"Kurkure Masala Munch", price:"â‚¹20", weight:"90 g", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/Kurkure%20Masala%20Munch.jpeg", cat:"snack"},
      {name:"Haldiram's Bhujia", price:"â‚¹85", weight:"150 g", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/Haldiram's%20Bhujia.jpeg", cat:"snack"},
      {name:"Balaji Wafers", price:"â‚¹10", weight:"45 g", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/Balaji%20Wafers.jpeg", cat:"snack"},
      {name:"Hide & Seek", price:"â‚¹30", weight:"100 g", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/Hide%20%26%20Seek.jpeg", cat:"snack"},
      {name:"Bingo Tedhe Medhe", price:"â‚¹15", weight:"75 g", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/Bingo%20Tedhe%20Medhe.jpeg", cat:"snack"},
      {name:"Pringles Original", price:"â‚¹120", weight:"110 g", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/Pringles%20Original.jpeg", cat:"snack"},
      {name:"Doritos Nacho Cheese", price:"â‚¹99", weight:"100 g", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/Doritos%20Nacho%20Cheese.jpeg", cat:"snack"}
    ]
  },
  {
    title: "Beauty",
    products: [
      {name:"Nivea Soft Light Moisturiser", price:"â‚¹199", weight:"200 ml", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/Nivea%20Soft%20Light%20Moisturiser.jpeg", cat:"beauty"},
      {name:"Lakme 9 to 5 Lipstick", price:"â‚¹299", weight:"4.5 g", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/Lakme%209%20to%205%20Lipstick.jpeg", cat:"beauty"},
      {name:"Dove Cream Beauty Bathing Bar", price:"â‚¹85", weight:"75 g", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/Dove%20Cream%20Beauty%20Bathing.jpeg", cat:"beauty"},
      {name:"Garnier Skin Naturals Face Wash", price:"â‚¹120", weight:"100 ml", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/Garnier%20Skin%20Naturals%20Face%20Wash.jpeg", cat:"beauty"},
      {name:"Maybelline Lash Sensational Mascara", price:"â‚¹349", weight:"9.2 ml", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/Maybelline%20Lash%20Sensational%20Mascara.jpeg", cat:"beauty"},
      {name:"Ponds Cold Cream", price:"â‚¹150", weight:"100 ml", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/Ponds%20Cold%20Cream.jpeg", cat:"beauty"},
      {name:"Himalaya Neem Face Wash", price:"â‚¹130", weight:"150 ml", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/Himalaya%20Neem%20Face%20Wash.jpeg", cat:"beauty"},
      {name:"Fair & Lovely Cream", price:"â‚¹99", weight:"50 g", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/Fair%20%26%20Lovely%20Cream.jpeg", cat:"beauty"},
      {name:"Lakme Eye Liner", price:"â‚¹220", weight:"1.2 ml", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/Lakme%20Eye%20Liner.jpeg", cat:"beauty"},
      {name:"Mysore sandal soap", price:"â‚¹80", weight:"150 g", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/mysore%20sandal.jpeg", cat:"beauty"}
     
    ]
  },
  {
    title: "Toys",
    products: [
      {name:"LEGO Classic Creative Brick Box", price:"â‚¹799", weight:"1 set", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/LEGO%20Classic%20Creative%20Brick%20Box.jpg", cat:"toys"},
      {name:"Hot Wheels Track Set", price:"â‚¹499", weight:"5 cars", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/Hot%20Wheels%20Track%20Set.jpg", cat:"toys"},
      {name:"Barbie Dreamhouse Playset", price:"â‚¹2499", weight:"1 set", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/Barbie%20Dreamhouse%20Playset.jpg", cat:"toys"},
      {name:"Remote Control Car", price:"â‚¹899", weight:"1 piece", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/Remote%20Control%20Car.jpg", cat:"toys"},
      {name:"Puzzle 500 Pieces", price:"â‚¹250", weight:"1 set", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/Puzzle%20500%20Pieces.jpg", cat:"toys"},
      {name:"Play-Doh Modeling Compound", price:"â‚¹399", weight:"12 colors", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/Play-Doh%20Modeling%20Compound.jpg", cat:"toys"},
      {name:"Nerf Elite Blaster", price:"â‚¹799", weight:"1 piece", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/Nerf%20Elite%20Blaster.jpg", cat:"toys"},
      {name:"Teddy Bear Soft Toy", price:"â‚¹450", weight:"Medium", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/Teddy%20Bear%20Soft%20Toy.jpg", cat:"toys"},
      {name:"Building Blocks Set", price:"â‚¹350", weight:"100 pcs", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/Building%20Blocks%20Set.jpg", cat:"toys"},
      {name:"Doll House Miniature", price:"â‚¹699", weight:"1 set", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/Doll%20House%20Miniature.jpg", cat:"toys"}
    ]
  },
  {
    title: "Student needs",
    products: [
      {name:"Classmate Notebook", price:"â‚¹45", weight:"200 pages", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/Classmate%20Notebook.jpeg", cat:"student"},
      {name:"Faber-Castell Geometry Box", price:"â‚¹150", weight:"1 set", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/Faber-Castell%20Geometry%20Box.jpeg", cat:"student"},
      {name:"Pilot V5 Roller Pen", price:"â‚¹60", weight:"Pack of 5", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/Pilot%20V5%20Roller%20Pen.jpeg", cat:"student"},
      {name:"Apsara Platinum Pencils", price:"â‚¹25", weight:"Pack of 10", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/Apsara%20Platinum%20Pencils.jpeg", cat:"student"},
      {name:"Camlin Highlighter Set", price:"â‚¹99", weight:"5 colors", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/Camlin%20Highlighter%20Set.jpeg", cat:"student"},
      {name:"Classmate Spiral Notebook", price:"â‚¹55", weight:"300 pages", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/Classmate%20Spiral%20Notebook.jpeg", cat:"student"},
      {name:"Staedtler Triplus Fineliner", price:"â‚¹250", weight:"Pack of 6", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/Staedtler%20Triplus%20Fineliner.jpeg", cat:"student"},
      {name:"Maped Compass", price:"â‚¹120", weight:"1 set", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/Maped%20Compass.jpeg", cat:"student"},
      {name:"Faber-Castell Eraser", price:"â‚¹15", weight:"Pack of 2", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/Faber-Castell%20Eraser.jpeg", cat:"student"},
      {name:"Stick File Folder", price:"â‚¹35", weight:"Pack of 10", img:"https://raw.github.com/chavitinibalaji/aagam-assets/main/Stick%20File%20Folder.jpeg", cat:"student"}
    ]
  }
];
const normalizedCategories = categorySections.map(s => ({
  title: s.title,
  products: s.products.map(p => ({
    ...p,
    highlights: {
      "Product Type": s.title,
      "Imported": "No",
      "Dietary Preference": "Veg",
      "Good For": p.cat === "fruit" ? "Immunity" : "Daily Use"
    },
    deliveryTime: "6 mins",
    tags: p.off ? ["Best Price"] : []
  }))
}));
const allProducts = normalizedCategories.flatMap(s => s.products);
// â”€â”€ Render Functions (unchanged) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderProductCard(container, p) {
  const inCart = cart.find(i => i.name === p.name);
  container.innerHTML += `
    <div class="product" onclick="openDetailsByName('${p.name.replace(/'/g, "\\'")}')">
      <div class="product-img-container"><img src="${p.img}"></div>
      <div class="product-info">
        <div class="product-name">${p.name}</div>
        <div class="product-weight">${p.weight}</div>
        <div class="product-price">
          <span class="selling">${p.price}</span>
          ${p.mrp ? `<span class="mrp">${p.mrp}</span><span class="off">${p.off||''}</span>` : ''}
        </div>
        <div class="time">${p.deliveryTime}</div>
        ${p.tags?.length ? `<span class="tag">${p.tags.join(' ')}</span>` : ''}
        ${inCart ? `
          <div class="qty-btn" onclick="event.stopPropagation()">
            <button onclick="updateQuantity('${p.name.replace(/'/g, "\\'")}', -1);event.stopPropagation()">â€“</button>
            <span>${inCart.qty}</span>
            <button onclick="updateQuantity('${p.name.replace(/'/g, "\\'")}', 1);event.stopPropagation()">+</button>
          </div>` : `
          <button class="add-btn" onclick="addToCart('${p.name.replace(/'/g, "\\'")}','${p.price}','${p.img}');event.stopPropagation()">ADD</button>`}
      </div>
    </div>`;
}
function renderSections() {
  const container = document.getElementById('sectionsContainer');
  container.innerHTML = '';
  document.getElementById('noResults').style.display = 'none';
  let hasResults = false;
  const q = searchQuery.toLowerCase().trim();
  normalizedCategories.forEach(sec => {
    const filtered = sec.products.filter(p => {
      const catOk = activeCategory === "all" || p.cat === activeCategory;
      const searchOk = !q || p.name.toLowerCase().includes(q) || p.weight.toLowerCase().includes(q);
      return catOk && searchOk;
    });
    if (filtered.length) {
      container.innerHTML += `
        <div class="cat-section">
          <div class="cat-title">${sec.title}</div>
          <div class="products" id="${sec.title.replace(/\s+/g,'')}"></div>
        </div>`;
      const grid = document.getElementById(sec.title.replace(/\s+/g,''));
      filtered.forEach(p => renderProductCard(grid, p));
      hasResults = true;
    }
  });
  if (!hasResults && searchQuery) {
    document.getElementById('searchTerm').textContent = searchQuery;
    noResults.style.display = 'block';
  }
}

function handleSearch() {
  searchQuery = document.getElementById('searchInput').value.trim();
  renderSections();
}

function addToCart(name, price, img) {
  let item = cart.find(i => i.name === name);
  if (item) item.qty += 1;
  else cart.push({name, price, img, qty: 1});
  renderSections();
  renderCart();
  updateCartBadge();
  openCart();
}

function addToCartFromDetails() {
  addToCart(currentProduct.name, currentProduct.price, currentProduct.img);
}

function updateQuantity(name, delta) {
  let item = cart.find(i => i.name === name);
  if (item) {
    item.qty += delta;
    if (item.qty <= 0) cart = cart.filter(i => i.name !== name);
    renderSections();
    renderCart();
    updateCartBadge();
  }
}

function updateCartBadge() {
  const countEl = document.getElementById('cartCount');
  const totalItems = cart.reduce((sum, item) => sum + (item.qty || 0), 0);
  if (countEl) {
    countEl.textContent = totalItems || '';
    countEl.style.display = totalItems > 0 ? 'flex' : 'none';
  }
}

function renderCart() {
  let container = document.getElementById('cartItems');
  container.innerHTML = "";
  let total = 0;
  cart.forEach(i => {
    let itemPrice = parseFloat(i.price.replace('â‚¹',''));
    total += itemPrice * (i.qty || 1);
    container.innerHTML += `
      <div class="cart-item">
        <div class="cart-item-img"><img src="${i.img}" alt="${i.name}"></div>
        <div class="cart-item-details">
          <h4>${i.name}</h4>
          <p>${i.price}</p>
          <div class="quantity-controls">
            <button onclick="updateQuantity('${i.name}', -1)">â€“</button>
            <span>${i.qty || 1}</span>
            <button onclick="updateQuantity('${i.name}', 1)">+</button>
          </div>
        </div>
        <div class="cart-item-price">â‚¹${(itemPrice * (i.qty || 1)).toFixed(0)}</div>
      </div>`;
  });
  document.getElementById('cartTotal').textContent = 'â‚¹' + total.toFixed(0);
  if (cart.length === 0) container.innerHTML = '<p style="text-align:center;color:#888;padding:40px;">Your cart is empty</p>';
  updateCartBadge();
}

// â”€â”€ Detail Modal Logic (no image added) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function openDetailsByName(name) {
  const p = allProducts.find(x => x.name === name);
  if (p) openDetails(p);
}
function openDetails(p) {
  currentProduct = p;
  document.getElementById('detailsName').textContent = p.name;
  document.getElementById('detailsWeight').textContent = p.weight;
  document.getElementById('detailsPrice').textContent = p.price;
  document.getElementById('detailsMrp').textContent = p.mrp ? `MRP ${p.mrp}` : '';
  document.getElementById('detailsDiscount').textContent = p.off || '';
  document.getElementById('detailsDelivery').textContent = `Delivery: ${p.deliveryTime}`;
  // NO PRODUCT IMAGE SET HERE - as per your request
  const list = document.getElementById('highlightsList');
  list.innerHTML = '';
  Object.entries(p.highlights).forEach(([k,v]) => {
    list.innerHTML += `<li><strong>${k}:</strong> ${v}</li>`;
  });
  loadSimilarProducts(p);
  updateDetailControls();
  document.getElementById('detailsOverlay').style.display = 'flex';
}
function loadSimilarProducts(p) {
  const container = document.getElementById('similarProducts');
  container.innerHTML = '';
  allProducts.filter(x => x.cat === p.cat && x.name !== p.name).forEach(s => {
    const div = document.createElement('div');
    div.className = 'similar-product';
    div.onclick = () => openDetailsByName(s.name);
    const inCart = cart.find(i => i.name === s.name);
    div.innerHTML = `
      <img src="${s.img}">
      <div class="name">${s.name}</div>
      <div><span class="price">${s.price}</span>${s.mrp ? `<span class="mrp">${s.mrp}</span>` : ''}</div>
      ${s.off ? `<div class="off">${s.off}</div>` : ''}
      <div class="time">${s.deliveryTime}</div>
      ${s.tags?.length ? `<span class="tag">${s.tags.join(' ')}</span>` : ''}
      ${inCart ? `
        <div class="qty-btn" onclick="event.stopPropagation()">
          <button onclick="updateQuantity('${s.name.replace(/'/g,"\\'")}', -1);event.stopPropagation()">â€“</button>
          <span>${inCart.qty}</span>
          <button onclick="updateQuantity('${s.name.replace(/'/g,"\\'")}', 1);event.stopPropagation()">+</button>
        </div>` : `
        <button class="add-btn" onclick="addToCart('${s.name.replace(/'/g,"\\'")}','${s.price}','${s.img}');event.stopPropagation()">ADD</button>`}`;
    container.appendChild(div);
  });
}
function scrollSimilar(dir) {
  document.getElementById('similarProducts').scrollLeft += dir * 160;
  
}
// â”€â”€ Quantity & Add Logic (unchanged) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function updateDetailControls() {
  const item = cart.find(i => i.name === currentProduct.name);
  const qtyControls = document.getElementById('qtyControlsDetail');
  const addBtn = document.getElementById('addToCartBtn');
  if (item && item.qty > 0) {
    qtyControls.style.display = 'flex';
    document.getElementById('detailQty').textContent = item.qty;
    addBtn.style.display = 'none';
  } else {
    qtyControls.style.display = 'none';
    addBtn.style.display = 'block';
    addBtn.disabled = false;
    addBtn.dataset.state = 'idle';
    addBtn.textContent = 'Add To Cart';
  }
}
function updateDetailQty(delta) {
  const item = cart.find(i => i.name === currentProduct.name);
  if (item) {
    item.qty = Math.max(1, item.qty + delta);
    refreshAfterCartChange();
    document.getElementById('detailQty').textContent = item.qty;
  } else if (delta > 0) {
    handleAddToCartFromDetails();
  }
}
function handleAddToCartFromDetails() {
  const btn = document.getElementById('addToCartBtn');
  if (btn.disabled) return;
  btn.disabled = true;
  btn.dataset.state = 'loading';
  btn.textContent = 'Adding...';
  setTimeout(() => {
    addToCart(currentProduct.name, currentProduct.price, currentProduct.img);
    btn.dataset.state = 'success';
    btn.textContent = 'Added âœ“';
    setTimeout(() => {
      updateDetailControls();
    }, 1500);
  }, 500);
}

function closeDetails() { document.getElementById('detailsOverlay').style.display = 'none'; }
function openCart() { document.getElementById('cartOverlay').style.display="block"; document.getElementById('cartPopup').classList.add("active"); }
function closeCart() { document.getElementById('cartOverlay').style.display="none"; document.getElementById('cartPopup').classList.remove("active"); }
function openProfile() { window.location.href = 'profile.html'; }

// Category navigation
document.querySelectorAll(".cat-nav span").forEach(c => {
  c.onclick = () => {
    document.querySelectorAll(".cat-nav span").forEach(i => i.classList.remove("active"));
    c.classList.add("active");
    activeCategory = c.dataset.cat;
    document.getElementById('bannerSection').classList.toggle("visible", activeCategory === "all");
    renderSections();
  };
});

// Banner carousel (simplified)
let currentSlide = 0;
const slides = document.querySelectorAll('.banner-slide');
function nextSlide() {
  slides[currentSlide].classList.remove('active');
  currentSlide = (currentSlide + 1) % slides.length;
  slides[currentSlide].classList.add('active');
}
setInterval(nextSlide, 5000);

// Initial render
renderSections();
renderCart();
</script>
</body>
</html>
