<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>My Cart - AAGAM</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    * { margin:0; padding:0; box-sizing:border-box; font-family:'Inter',sans-serif; }
    body { background:#f8f9fa; min-height:100vh; padding-bottom:140px; }
    .header {
      background:#fff;
      padding:14px 16px;
      font-size:18px;
      font-weight:700;
      box-shadow:0 2px 6px rgba(0,0,0,.08);
      position:sticky;
      top:0;
      z-index:100;
      text-align:center;
    }
    .eta-banner {
      background:#fff;
      padding:12px 16px;
      font-weight:600;
      color:#ff3269;
      font-size:15px;
      border-bottom:1px solid #eee;
      text-align:center;
    }
    .container { padding:16px; }
    .card {
      background:#fff;
      border-radius:16px;
      margin-bottom:16px;
      box-shadow:0 4px 12px rgba(0,0,0,.06);
      overflow:hidden;
    }
    .card-header {
      padding:16px;
      font-size:15px;
      font-weight:700;
      background:#fafafa;
      border-bottom:1px solid #eee;
    }
    .cart-item {
      display:flex;
      align-items:center;
      gap:12px;
      padding:16px;
      border-bottom:1px solid #eee;
    }
    .cart-item:last-child { border-bottom:none; }
    .cart-img {
      width:60px;
      height:60px;
      background:#f8f9fa;
      border-radius:10px;
      flex-shrink:0;
      object-fit:cover;
    }
    .cart-details { flex:1; }
    .cart-name { font-size:14px; font-weight:500; line-height:1.4; margin-bottom:4px; }
    .cart-price { font-size:13px; color:#555; }
    .qty-control {
      display:flex;
      align-items:center;
      gap:10px;
      background:#f8f9fa;
      border-radius:24px;
      padding:6px 14px;
      font-weight:600;
      font-size:15px;
    }
    .qty-btn {
      width:32px;
      height:32px;
      background:#ff3269;
      color:white;
      border:none;
      border-radius:50%;
      font-size:18px;
      line-height:1;
      cursor:pointer;
    }
    .add-more {
      padding:16px;
      color:#ff3269;
      font-weight:600;
      text-align:center;
      cursor:pointer;
      border-top:1px solid #eee;
    }
    .eco-option {
      padding:14px 16px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      font-size:14px;
    }
    .user-info {
      padding:14px 16px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      font-size:14px;
      background:#fff5f8;
    }
    .edit-link { color:#ff3269; font-weight:600; cursor:pointer; }
    .bill-row { display:flex; justify-content:space-between; font-size:14px; margin:8px 0; }
    .bill-total {
      font-size:16px;
      font-weight:700;
      padding-top:12px;
      border-top:1px dashed #ddd;
    }
    .savings-box {
      background:#e8f5e9;
      border-radius:12px;
      padding:12px;
      margin:16px 0;
    }
    .savings-title {
      color:#2e7d32;
      font-weight:700;
      margin-bottom:8px;
    }
    .savings-item {
      display:flex;
      justify-content:space-between;
      font-size:13px;
      margin:4px 0;
      color:#2e7d32;
    }
    .place-btn {
      position:fixed;
      bottom:0;
      left:0;
      right:0;
      background:#ff3269;
      color:#fff;
      border:none;
      padding:16px;
      font-size:17px;
      font-weight:700;
      cursor:pointer;
      box-shadow:0 -4px 12px rgba(0,0,0,.1);
      z-index:100;
      text-align:center;
    }
  </style>
</head>
<body>

<div class="header">My Cart</div>

<div class="eta-banner">
  âš¡ Delivery in 6â€“12 mins
</div>

<div class="container">

  <!-- Cart Items -->
  <div class="card">
    <div class="card-header">Items (<span id="cartCount">0</span>)</div>
    <div id="cartItems"></div>
    <div class="add-more" onclick="window.location.href='index.html'">+ Add More Items</div>
  </div>

  <!-- Paper Bag Option -->
  <div class="card eco-option">
    <div>
      <strong>I don't need a paper bag!</strong><br>
      <small>Opt in to save paper</small>
    </div>
    <input type="checkbox" checked style="width:24px;height:24px;">
  </div>

  <!-- User Info -->
  <div class="card user-info">
    <div>
      Ordering for <strong>balu, 8179315170</strong>
    </div>
    <span class="edit-link" onclick="alert('Edit user details')">Edit</span>
  </div>

  <!-- Bill Summary -->
  <div class="card">
    <div class="card-header">Bill Summary</div>
    <div class="card-body">
      <div class="bill-row"><span>Item Total</span><span id="itemTotal">â‚¹0</span></div>
      <div class="bill-row"><span>Handling Fee</span><span>â‚¹10 â†’ <strong>FREE</strong></span></div>
      <div class="bill-row"><span>Delivery Fee</span><span id="deliveryFee">â‚¹0</span></div>
      <div class="bill-total">
        <span>To Pay</span>
        <span id="grandTotal">â‚¹0</span>
      </div>

      <div class="savings-box" id="savingsBox" style="display:none;">
        <div class="savings-title">Savings on this order</div>
        <div class="savings-item">
          <span>Discount on MRP</span>
          <span id="mrpDiscount">â‚¹0</span>
        </div>
        <div class="savings-item">
          <span>FREE delivery savings</span>
          <span id="deliverySavings">â‚¹0</span>
        </div>
        <div class="savings-item">
          <span>Savings on Handling fee</span>
          <span id="handlingSavings">â‚¹10</span>
        </div>
        <div class="savings-item">
          <span>Total savings</span>
          <span id="totalSavings">â‚¹0</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Place Order -->
  <button class="place-btn" onclick="proceedToCheckout()">
    Click to Pay â‚¹<span id="finalPayAmount">0</span>
  </button>

</div>

<script>
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Cart Management (localStorage)
function getCart() {
  return JSON.parse(localStorage.getItem('aagamCart')) || [];
}

function saveCart(cart) {
  localStorage.setItem('aagamCart', JSON.stringify(cart));
  renderCart();
  updateBill();
}

function addToCart(product) {
  let cart = getCart();
  const existing = cart.find(item => item.name === product.name);
  if (existing) {
    existing.qty = (existing.qty || 1) + 1;
  } else {
    cart.push({ ...product, qty: 1 });
  }
  saveCart(cart);
  alert(`${product.name} added to cart!`);
}

function updateQty(name, change) {
  let cart = getCart();
  const itemIndex = cart.findIndex(i => i.name === name);
  if (itemIndex !== -1) {
    cart[itemIndex].qty = Math.max(1, (cart[itemIndex].qty || 1) + change);
    if (cart[itemIndex].qty === 1 && change === -1) {
      cart.splice(itemIndex, 1); // Remove if qty becomes 0
    }
    saveCart(cart);
  }
}

function removeItem(name) {
  let cart = getCart();
  cart = cart.filter(i => i.name !== name);
  saveCart(cart);
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Render Cart
function renderCart() {
  const container = document.getElementById("cartItems");
  const cart = getCart();
  container.innerHTML = "";

  if (cart.length === 0) {
    container.innerHTML = `
      <div style="text-align:center;padding:40px;color:#777;">
        <div style="font-size:60px;margin-bottom:16px;">ðŸ›’</div>
        <h3>Your cart is empty</h3>
        <p>Add some groceries to get started!</p>
        <a href="index.html" style="color:#ff3269;text-decoration:none;font-weight:600;">Start Shopping â†’</a>
      </div>
    `;
    document.getElementById("cartCount").innerText = "0 items";
    return;
  }

  cart.forEach(item => {
    const itemTotal = item.price * item.qty;
    const div = document.createElement("div");
    div.className = "cart-item";
    div.innerHTML = `
      <div class="cart-img">${item.name.charAt(0)}</div>
      <div class="cart-details">
        <div class="cart-name">${item.name}</div>
        <div class="cart-price">â‚¹${item.price} Ã— ${item.qty}</div>
      </div>
      <div class="qty-control">
        <button class="qty-btn" onclick="updateQty('${item.name}', -1)">-</button>
        <span>${item.qty}</span>
        <button class="qty-btn" onclick="updateQty('${item.name}', 1)">+</button>
      </div>
    `;
    container.appendChild(div);
  });

  document.getElementById("cartCount").innerText = `${cart.length} items`;
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Update Bill Summary
function updateBill() {
  const cart = getCart();
  let subtotal = 0;
  cart.forEach(item => {
    subtotal += item.price * item.qty;
  });

  const delivery = subtotal >= 500 ? 0 : 30; // Free delivery above â‚¹500
  const handling = 10;
  const grand = subtotal + delivery + handling;

  document.getElementById("itemTotal").innerText = `â‚¹${subtotal}`;
  document.getElementById("deliveryFee").innerText = delivery === 0 ? "FREE" : `â‚¹${delivery}`;
  document.getElementById("grandTotal").innerText = `â‚¹${grand}`;
  document.getElementById("finalPayAmount").innerText = grand;

  // Savings box
  const savingsBox = document.getElementById("savingsBox");
  if (delivery === 0 || handling === 0) {
    savingsBox.style.display = "block";
    document.getElementById("deliverySavings").innerText = delivery === 0 ? "â‚¹30" : "â‚¹0";
    document.getElementById("handlingSavings").innerText = handling === 0 ? "â‚¹10" : "â‚¹0";
    document.getElementById("totalSavings").innerText = (delivery === 0 ? 30 : 0) + (handling === 0 ? 10 : 0);
  } else {
    savingsBox.style.display = "none";
  }
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Proceed to Checkout
function proceedToCheckout() {
  const cart = getCart();
  if (cart.length === 0) {
    alert("Your cart is empty!");
    return;
  }
  window.location.href = "checkout.html";
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Init on load
window.onload = () => {
  renderCart();
  updateBill();
};
</script>
</body>
</html>
